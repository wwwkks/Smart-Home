(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/configPage/configPage"],{1518:function(t,e,s){"use strict";s.r(e);var o=s("51c0"),n=s.n(o);for(var h in o)["default"].indexOf(h)<0&&function(t){s.d(e,t,(function(){return o[t]}))}(h);e["default"]=n.a},"396d":function(t,e,s){"use strict";s.d(e,"b",(function(){return o})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){}));var o=function(){var t=this.$createElement;this._self._c},n=[]},"51c0":function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=s("491b"),n=s("d67b"),h=s("e439"),i=h.createCommonToken,a=s("491b"),r={data:function(){return{token:"",temp_th:100,humi_th:100,lsens_th:100,ppm_th:100}},onShow:function(){},onLoad:function(){var e=this;this.token=i({author_key:"rQ9SmPK1mdPtwhRto/+8RNqy57QHHxqjd0GjEzLSkkiE4m2tBg3M43LRK+kvs7sW",version:"2022-05-01",user_id:"412104"}),t.request({url:"http://".concat(o.ip,"/get_thresholds"),method:"GET",data:{username:a.getUser("username")},success:function(t){200===t.statusCode?(console.log(t),a.setUser("temp_th",t.data.temp_th),a.setUser("humi_th",t.data.humi_th),a.setUser("lsens_th",t.data.lsens_th),a.setUser("ppm_th",t.data.ppm_th),e.temp_th=a.getUser("temp_th"),e.humi_th=a.getUser("humi_th"),e.lsens_th=a.getUser("lsens_th"),e.ppm_th=a.getUser("ppm_th"),a.getAll()):console.error("Failed to get thresholds:",t.data.error)},fail:function(t){console.error("Request failed:",t)}}),this.postThresholds()},onNavigationBarButtonTap:function(e){t.reLaunch({url:"/pages/login/login"})},methods:{postThresholds:function(){t.request({url:"https://iot-api.heclouds.com/thingmodel/set-device-property",method:"POST",data:{product_id:"6j085UsKhq",device_name:"d1",params:{temp_th:this.temp_th,humi_th:this.humi_th,lsens_th:this.lsens_th,ppm_th:this.ppm_th}},header:{authorization:this.token},success:function(t){console.log("设备端阈值调整成功:"),console.log(t)},fail:function(){console.log("设备端阈值调整失败")}})},sliderChange:function(e,s){console.log(s),console.log("value 发生变化："+e.detail.value);"slider1"==s?(this.temp_th=e.detail.value,this.key_th={temp_th:this.temp_th}):"slider2"==s?(this.humi_th=e.detail.value,this.key_th={humi_th:this.humi_th}):"slider3"==s?(this.lsens_th=e.detail.value,this.key_th={lsens_th:this.lsens_th}):"slider4"==s&&(this.ppm_th=e.detail.value,this.key_th={ppm_th:this.ppm_th}),console.log("value 发生变化：>>>>>"+(0,n.stringify)(this.key_th)+"<<<<<<<"),t.request({url:"http://".concat(o.ip,"/update_thresholds"),method:"PUT",data:{username:a.getUser("username"),temp_th:this.temp_th,humi_th:this.humi_th,lsens_th:this.lsens_th,ppm_th:this.ppm_th},success:function(t){200===t.statusCode?(console.log("数据库阈值修改成功返回"),console.log(t)):console.error("Failed to update thresholds:",t.data.error)},fail:function(t){console.error("Request failed:",t)}}),this.postThresholds()}}};e.default=r}).call(this,s("df3c")["default"])},6506:function(t,e,s){"use strict";s.r(e);var o=s("396d"),n=s("1518");for(var h in n)["default"].indexOf(h)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(h);s("70e5");var i=s("828b"),a=Object(i["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=a.exports},"70e5":function(t,e,s){"use strict";var o=s("bca8"),n=s.n(o);n.a},bca8:function(t,e,s){},f588:function(t,e,s){"use strict";(function(t,e){var o=s("47a9");s("1f9a");o(s("3240"));var n=o(s("6506"));t.__webpack_require_UNI_MP_PLUGIN__=s,e(n.default)}).call(this,s("3223")["default"],s("df3c")["createPage"])}},[["f588","common/runtime","common/vendor"]]]);