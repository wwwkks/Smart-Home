{"version":3,"sources":["uni-app:///main.js","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/pages/index/index.vue?8b0a","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/pages/index/index.vue?e6bf","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/pages/index/index.vue?e178","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/pages/index/index.vue?e8ea","uni-app:///pages/index/index.vue","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/components/GlobalPopup.vue?64f7","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/components/GlobalPopup.vue?40f2","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/components/GlobalPopup.vue?3705","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/components/GlobalPopup.vue?2cdd","uni-app:///components/GlobalPopup.vue","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/components/GlobalPopup.vue?5c78","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/components/GlobalPopup.vue?e308","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/pages/control/control.vue?9239","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/pages/control/control.vue?b457","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/pages/control/control.vue?34cf","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/pages/control/control.vue?eb0f","uni-app:///pages/control/control.vue","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/pages/control/control.vue?ac27","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/pages/control/control.vue?1249","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/pages/configPage/configPage.vue?9b35","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/pages/configPage/configPage.vue?7e2b","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/pages/configPage/configPage.vue?9cb6","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/pages/configPage/configPage.vue?9134","uni-app:///pages/configPage/configPage.vue","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/pages/configPage/configPage.vue?5ca6","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/pages/configPage/configPage.vue?8493","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/pages/index/index.vue?6be4","webpack:///D:/desktop/Smart-Home-project/uniapp/智能家居APP-mysql-openai-speech/pages/index/index.vue?ecc7"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","require","createCommonToken","data","token","temp","humi","lsens","ppm","led","beep","bright","weather_temp","weather","windspeed","text","air","category","aqi","warning","suggest","temp_th","humi_th","lsens_th","ppm_th","text1","text2","text3","text4","condition1","condition2","condition3","condition4","userInput","chatResponse","messages","recording","recorderManager","computed","computedText","result","onLoad","author_key","version","user_id","uni","onShow","setInterval","onNavigationBarButtonTap","url","methods","toggleCondition","fetchThreshold","console","method","username","success","user","fail","showPopup","fetchDevData","product_id","device_name","header","getWeather","resolve","reject","Promise","then","catch","sendMessage","type","content","userQuery","model","role","functions","name","description","parameters","properties","status","required","sensor","enum","value","level","mode","function_call","response","functionName","args","functionResult","detail","thresholdTypes","brightnessLevels","volumeLevels","speedLevels","colorModes","startRecord","duration","sampleRate","numberOfChannels","encodeBitRate","format","frameSize","title","icon","stopRecord","speechToText","filePath","formData","language","show","show2","show3","show4","open","close","open2","close2","showPopup2","open3","close3","showPopup3","open4","close4","showPopup4","list1","list2","list3","list4","curNow1","curNow2","curNow3","curNow4","onLedSwitch","params","onBeepSwitch","sectionChange","updateState","fetchData","handleClick","handleBeepClick","handleSpeedClick","handleModeClick","getThresholdsFromSqlAndPost","updateThresholdsFromSqlAndPost","postThresholds","sliderChange","rollbackThresholds","error"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACqL;AACrL,gBAAgB,yLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,qUAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1CA;AAAA;AAAA;AAAA;AAA4rB,CAAgB,2qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;AC6FhtB;AAEA;AAMA;AAIA;AAQA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAnBA;AAIA,eAEAC;EADAC;AACA,eAoBA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MACAC;MACAC;MACAC;QACAR;QACAC;QACAQ;QACAC;MACA;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACAC;MACA;MACA;QACAC;MACA;MACA;QACAA;MACA;MACA;QACAA;MACA;MACA;QACAA;MACA;MACA;MACA,yGACA;QACAA;MACA;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;IACA;IACA;IACA;IACA;IACAC;IACA;IACA;IACA;EACA;EACAC;IAAA;IACA;IACA;IACAC;MAAA;MACA;IACA;IACAA;MACA;IACA;EACA;EACAC;IACAH;MACAI;IACA;EACA;EACAC;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACAC;MACAA;MACAA;MACAR;QACA;QACAI;QACAK;QACAnD;UACAoD;QACA;;QACAC;UACA;YACAC;YACAA;YACAA;YACAA;YACA;YACA;YACA;YACA;UACA;YACAJ;UACA;QACA;QACAK;UACAL;QACA;MACA;IACA;IAEAM;MACA;MAEA;QACAN;QACA;QACA;MACA;MAEA;QACAA;QACA;QACA;MACA;MAGA;QACAA;QACA;QACA;MACA;MAEA;QACAA;QACA;QACA;MACA;IACA;IACAO;MAAA;MACAf;QACAI;QAAA;QACAK;QACAnD;UACA0D;UACAC;QACA;QACAC;UACA;QACA;;QACAP;UACAH;UACAA;UACA;UACA;UACA;UACA;UACA;UACA;QACA;MACA;IACA;IACAW;MAAA;MACAX;MAEA;QACAR;UACAI;UACAK;UACAE;YACAH;YACAA;YACA;cACA;cACA;cACA;cACA;cACA;cACAY;YACA;cACAZ;cACAa;YACA;UACA;UACAR;YACAL;YACAa;UACA;QACA;MACA;MAEA;QACArB;UACAI;UACAK;UACAE;YACA;cACA;cACA;cACAS;YACA;cACAZ;cACAa;YACA;UACA;UACAR;YACAL;YACAa;UACA;QACA;MACA;MAEA;QACArB;UACAI;UACAK;UACAE;YACA;cACA;cACAS;YACA;cACAZ;cACAa;YACA;UACA;UACAR;YACAL;YACAa;UACA;QACA;MACA;MAEA;QACArB;UACAI;UACAK;UACAE;YACA;cACA;cACAS;YACA;cACAZ;cACAa;YACA;UACA;UACAR;YACAL;YACAa;UACA;QACA;MACA;MAEAC,0EACAC;QACAf;QACAA;QACAA;MACA,GACAgB;QACAhB;MACA;IACA;IACAiB;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAEA;kBACAC;kBACAC;gBACA;gBAEAnB;gBAEAoB;gBACA;gBAAA;gBAAA;gBAAA,OAGA5B;kBACAI;kBACAK;kBACAnD;oBACAuE;oBACAvC;sBACAwC;sBACAH;oBACA;sBACAG;sBACAH;oBACA;oBACAI;sBACAC;sBACAC;sBACAC;wBACAR;wBACAS;0BACAC;4BACAV;4BACAO;0BACA;wBACA;wBACAI;sBACA;oBACA,GACA;sBACAL;sBACAC;sBACAC;wBACAR;wBACAS;0BACAC;4BACAV;4BACAO;0BACA;wBACA;wBACAI;sBACA;oBACA,GACA;sBACAL;sBACAC;sBACAC;wBACAR;wBACAS;0BACAG;4BACAZ;4BACAa,2DACA,UACA;4BACAN;0BACA;wBACA;wBACAI;sBACA;oBACA,GACA;sBACAL;sBACAC;sBACAC;wBACAR;wBACAS;0BACAT;4BACAA;4BACAa;4BACAN;0BACA;0BACAO;4BACAd;4BACAO;0BACA;wBACA;wBACAI;sBACA;oBACA,GACA;sBACAL;sBACAC;sBACAC;wBACAR;wBACAS;0BACAM;4BACAf;4BACAa;4BACAN;0BACA;wBACA;wBACAI;sBACA;oBACA,GACA;sBACAL;sBACAC;sBACAC;wBACAR;wBACAS;0BACAM;4BACAf;4BACAa;4BACAN;0BACA;wBACA;wBACAI;sBACA;oBACA,GACA;sBACAL;sBACAC;sBACAC;wBACAR;wBACAS;0BACAM;4BACAf;4BACAa;4BACAN;0BACA;wBACA;wBACAI;sBACA;oBACA,GACA;sBACAL;sBACAC;sBACAC;wBACAR;wBACAS;0BACAO;4BACAhB;4BACAa;4BACAN;0BACA;wBACA;wBACAI;sBACA;oBACA,EACA;oBACAM;kBACA;kBACAzB;oBACA;oBACA;oBACA;kBACA;gBACA;cAAA;gBAhJA0B;gBAAA,MAkJAA;kBAAA;kBAAA;gBAAA;gBACAjD,2CAEA;gBACA;kBACA;oBACA+B;oBACAC;kBACA;gBACA;gBAEAnB;;gBAEA;gBAAA,KACAb;kBAAA;kBAAA;gBAAA;gBACAkD;gBACAC;gBAEAC;gBAAA,cAEAF;gBAAA,gCACA,oCASA,qCASA,uCAyBA,sCAgBA,uCAMA,uCAMA,qCAMA;gBAAA;cAAA;gBA5EA;kBACAG;oBACAR;kBACA;gBACA;gBACAO;gBAAA;cAAA;gBAIA;kBACAC;oBACAR;kBACA;gBACA;gBACAO;gBAAA;cAAA;gBAAA,cAIAD;gBAAA,gCACA,qCAGA,kCAGA,+BAGA,+BAGA,iCAIA;gBAAA;cAAA;gBAfAC;gBAAA;cAAA;gBAGAA;gBAAA;cAAA;gBAGAA;gBAAA;cAAA;gBAGAA;gBAAA;cAAA;gBAGAA,+DACA;gBAAA;cAAA;gBAGAA,yFACA;gBAAA;cAAA;gBAAA;cAAA;gBAMA;kBACA;kBACAE;oBACAzF;oBACAC;oBACAC;oBACAC;kBACA;kBACAoF;;kBAEA;kBACA;gBACA;gBAAA;cAAA;gBAIA;gBACAG;gBACAH;gBAAA;cAAA;gBAIA;gBACAI;gBACAJ;gBAAA;cAAA;gBAIA;gBACAK;gBACAL;gBAAA;cAAA;gBAIA;gBACAM;gBACAN;gBAAA;cAAA;gBAIA;kBACA;oBACArB;oBACAC;kBACA;gBACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAIAnB;gBACA;kBACAkB;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACA2B;MAAA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;;MAEA;MACA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;MACA;;MAEA;QACApD;QACAR;UACA6D;UACAC;QACA;MACA;MAEA;QACA;QACAtD;QACAR;UACA6D;UACAC;QACA;QACA;QACA;MACA;MAEA;IACA;IAEAC;MACA;QACA;MACA;IACA;IAEAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEA;gBACAhE;kBACA6D;gBACA;gBAAA;gBAAA,OAEA7D;kBACAI;kBACA6D;kBACAjC;kBACAkC;oBACArC;oBACAsC;kBACA;kBACAjD;oBACA;oBACA;kBACA;gBACA;cAAA;gBAZA0B;gBAcA;gBACA5C;gBAAA,MAEA4C;kBAAA;kBAAA;gBAAA;gBACAjD;gBAAA,KACAA;kBAAA;kBAAA;gBAAA;gBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA,MAEA;cAAA;gBAAA;gBAAA;cAAA;gBAAA,MAGA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAIAa;gBACAR;gBACAA;kBACA6D;kBACAC;gBACA;gBACA;kBACApC;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACxxBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwH;AACxH;AAC+D;AACL;AACa;;;AAGvE;AACkL;AAClL,gBAAgB,yLAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,sFAAM;AACR,EAAE,+FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAmrB,CAAgB,irBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCgCvsB;EACAK;EACA1E;IACA;MACA8G;MACAC;MACAC;MACAC;IACA;EACA;EACAlE;IACAmE;MACA;IAAA,CACA;IACAC;MACA;MACA;IACA;IACA3D;MACA;IACA;IAEA4D;MACA;IAAA,CACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IAEAC;MACA;IAAA,CACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IAEAC;MACA;IAAA,CACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;EAEA;AACA;AAAA,2B;;;;;;;;;;;;ACxFA;AAAA;AAAA;AAAA;AAAo+B,CAAgB,87BAAG,EAAC,C;;;;;;;;;;;ACAx/B;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;AACa;;;AAGnE;AACqL;AACrL,gBAAgB,yLAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,qUAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAA8rB,CAAgB,6qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;AC+CltB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA,eAEA9H;EADAC;AAEA;EACAwC;EACAC;EACAC;AACA;AACA;AAAA,eACA;EACAzC;IACA;MACAM;MACAC;MACAsH;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACA9F;IAEA;EACA;EACAK;IAAA;IACAC;MACA;IACA;IACAA;MAEA;IAEA;EAEA;EACAC;IACAH;MACAI;IACA;EACA;EACAC;IACAsF;MACA;MACA;MACA3F;QACAI;QAAA;QACAK;QACAnD;UACA0D;UACAC;UACA2E;YACA;UACA;QACA;QACA1E;UACA;QACA;;QACAP;UACAH;QACA;MACA;IACA;IACAqF;MACA;MACA;MACA7F;QACAI;QAAA;QACAK;QACAnD;UACA0D;UACAC;UACA2E;YACA;UACA;QACA;QACA1E;UACA;QACA;;QACAP;UACAH;QACA;MACA;IACA;IACAsF;MACA;IACA;IACAC;MACA/F;QACAI;QAAA;QACAK;QACAnD;UACA0D;UACAC;UACA2E;YACA;YACA;YACA;YACA;YACA;YACA;UACA;QACA;QACA1E;UACA;QACA;;QACAP;UACAH;QACA;QACAK;UACAL;QACA;MACA;IACA;IACAwF;MAAA;MACAhG;QACAI;QAAA;QACAK;QACAnD;UACA0D;UACAC;QACA;QACAC;UACA;QACA;;QACAP;UACAH;UACAA;UACA;UACA;UACAA;UACAA;QACA;MACA;IACA;IAEAyF;MACA;MACA;IAEA;IACAC;MACA;MACA;IAEA;IACAC;MACA;MACA;IAEA;IACAC;MACA;MACA;IACA;EAEA;AACA,GAEA;AAAA;AACA;EACA5F;EAEA;;EAEA;EACAR;IACAI;IAAA;IACAK;IACAnD;MACA0D;MACAC;MACA2E;QACA;MACA;IACA;IACA1E;MACA;IACA;;IACAP;MACAH;IACA;EACA;AAGA;AAAA;AAEA;EACAA;EAEA;EACA;EACAR;IACAI;IACAK;IACAnD;MACA0D;MACAC;MACA2E;QACA;MACA;IACA;IACA1E;MACA;IACA;IACAP;MACAH;IACA;EACA;AACA;AAAA;AAEA;EACAA;EAEAR;IACAI;IACAK;IACAnD;MACA0D;MACAC;MACA2E;QACA;MACA;IACA;IACA1E;MACA;IACA;IACAP;MACAH;IACA;EACA;AACA;AAAA;AAEA;EACAA;EAEAR;IACAI;IACAK;IACAnD;MACA0D;MACAC;MACA2E;QACA;MACA;IACA;IACA1E;MACA;IACA;IACAP;MACAH;IACA;EACA;AACA;AAAA;AAEA;EACAA;EAEAR;IACAI;IACAK;IACAnD;MACA0D;MACAC;MACA2E;QACA;MACA;IACA;IACA1E;MACA;IACA;IACAP;MACAH;IACA;EACA;AACA;AAAA;AAEA;EACAA;EAEAR;IACAI;IACAK;IACAnD;MACA0D;MACAC;MACA2E;QACA;MACA;IACA;IACA1E;MACA;IACA;IACAP;MACAH;IACA;EACA;AACA;AAAA,oC;;;;;;;;;;;;;AC9VA;AAAA;AAAA;AAAA;AAAq/B,CAAgB,07BAAG,EAAC,C;;;;;;;;;;;ACAzgC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;AACa;;;AAGtE;AACqL;AACrL,gBAAgB,yLAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAisB,CAAgB,grBAAG,EAAC,C;;;;;;;;;;;;;;;;;;AC6DrtB;AAGA;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,eAEApD;EADAC;AAEA;AACA;EACAwC;EACAC;EACAC;AACA;AACA;AAAA,eAEA;EACAzC;IACA;MACAkB;MACAC;MACAC;MACAC;IACA;EACA;EACAsB;IAAA;IACAC;MAAA;MACA;IACA;EACA;EACAN;IAEA;EACA;EACAO;IACAH;MACAI;IACA;EACA;EACAC;IACAgG;MAAA;MACArG;QACA;QACAI;QACAK;QACAnD;UACAoD;QACA;;QACAC;UACA;YACA;YACAH;YACAI;YACAA;YACAA;YACAA;YACA;YACA;YACA;YACA;YACAA;YAEA;UACA;YACAJ;UACA;QACA;QACAK;UACAL;QACA;MACA;IAEA;IACA8F;MAAA;MACA;MACAtG;QACAI;QACAK;QACAnD;UACAoD;UACAlC;UACAC;UACAC;UACAC;QACA;QACAgC;UACA;YACAH;YACA;YACA;UACA;YACAA;YACA;YACA;UACA;QACA;QACAK;UACAL;UACA;UACA;QACA;MACA;IACA;IACA+F;MACAvG;QACAI;QACAK;QACAnD;UACA0D;UACAC;UACA2E;YACA;YACA;YACA;YACA;UACA;QACA;QACA1E;UACA;QACA;QACAP;UACAH;UACA;YACAR;cACA6D;cACAC;YACA;UACA;QAEA;QACAjD;UACAL;UACA;QACA;MACA;IACA;IACA;IACAgG;MACAhG;MACAA;;MAEA;MACA;QACA;UACA;UACA;QACA;UACA;UACA;QACA;UACA;UACA;QACA;UACA;UACA;MAAA;MAEA;IACA;IACA;IACAiG;MACA;MACA;MACA;MACA;MAEAzG;QACA6D;QACAC;MACA;IACA;EACA;AACA,GAEA;AAAA;AACA;EACAtD;EACAA;EACAA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACAR;IACA;IACAI;IACAK;IACAnD;MACAoD;IACA;;IACAC;MACA;QACA;QACAH;QACAI;QACAA;QACAA;QACAA;QACApC;QACAC;QACAC;QACAC;;QAEA;QACA;UACA;YACAH;YACA;UACA;YACAC;YACA;UACA;YACAC;YACA;UACA;YACAC;YACA;UACA;YACA6B;YACA;YACA;QAAA;;QAGA;QACAR;UACAI;UACAK;UACAnD;YACAoD;YACAlC;YACAC;YACAC;YACAC;UACA;UACAgC;YACAH;YACA;cACAA;;cAEA;cACAR;gBACAI;gBACAK;gBACAnD;kBACA0D;kBACAC;kBACA2E;oBACA;oBACA;oBACA;oBACA;kBACA;gBACA;gBACA1E;kBACA;gBACA;gBACAP;kBACAH;kBACAR;oBACA6D;oBACAC;kBACA;gBACA;gBACAjD;kBACAL;kBACA;gBACA;cACA;YACA;cACAA,uDACAkG;cACA;YACA;UACA;;UACA7F;YACAL;YACA;UACA;QACA;MAGA;QACAA;MACA;IACA;;IACAK;MACAL;IACA;EACA;AAMA;AAAA,oC;;;;;;;;;;;;;AC3WA;AAAA;AAAA;AAAA;AAAw/B,CAAgB,67BAAG,EAAC,C;;;;;;;;;;;ACA5gC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAm/B,CAAgB,w7BAAG,EAAC,C;;;;;;;;;;;ACAvgC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&\"","var components\ntry {\n  components = {\n    uNoticeBar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-notice-bar/u-notice-bar\" */ \"@/uni_modules/uview-ui/components/u-notice-bar/u-notice-bar.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.messages.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\r\n\t<view class=\"wrap\">\r\n\t\t<view>\r\n\t\t\t<u-notice-bar :text=\"computedText\"></u-notice-bar>\r\n\r\n\t\t\t<!-- 测试按钮，用于模拟条件切换 -->\r\n\t\t\t<!-- \t\t\t<view style=\"margin-top: 20px;\">\r\n\t\t\t\t<button @click=\"toggleCondition('condition1')\">切换条件1</button>\r\n\t\t\t\t<button @click=\"toggleCondition('condition2')\">切换条件2</button>\r\n\t\t\t\t<button @click=\"toggleCondition('condition3')\">切换条件3</button>\r\n\t\t\t</view> -->\r\n\t\t</view>\r\n\t\t<!-- 测试-->\r\n\t\t<!-- <button @click=\"showPopup\">显示弹出框</button> -->\r\n\t\t<!-- 引入的全局弹出框组件 -->\r\n\t\t<GlobalPopup ref=\"popup\" />\r\n\r\n\t\t<view class=\"weather-card\">\r\n\t\t\t<view>威海</view>\r\n\t\t\t<view class=\"weather-info\">\r\n\t\t\t\t<view class=\"weather-temp\">{{ weather.temp !== undefined ? weather.temp : '加载中...' }} ℃</view>\r\n\t\t\t\t<view class=\"weather-text\">{{ weather.text !== undefined ? weather.text : '加载中...' }}</view>\r\n\t\t\t\t<view class=\"weather-humidity\">湿度: {{ weather.humi !== undefined ? weather.humi : '加载中...' }}%</view>\r\n\t\t\t\t<view class=\"weather-wind\">风速: {{ weather.windspeed !== undefined ? weather.windspeed : '加载中...' }} km/h\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"weather-wind\">空气{{ air.category !== undefined ? air.category : '加载中...' }} {{ air.aqi !==\r\n\t\t\t\t\tundefined ? air.aqi : '加载中...' }}</view>\r\n\t\t\t\t<view class=\"weather-wind\">{{ suggest !== undefined ? suggest : '加载中...' }}</view>\r\n\t\t\t\t<view class=\"weather-wind\">预警信息: {{ warning !== undefined ? warning : '加载中...' }}</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"dev-area\">\r\n\t\t\t<view class=\"dev-cart\">\r\n\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t<view class=\"dev-name\">温度</view>\r\n\t\t\t\t\t<image class=\"dev-logo\" src=\"../../static/temp.png\" mode=\"\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"dev-data\">{{ temp }} ℃</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"dev-cart\">\r\n\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t<view class=\"dev-name\">湿度</view>\r\n\t\t\t\t\t<image class=\"dev-logo\" src=\"../../static/humi.png\" mode=\"\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"dev-data\">{{ humi }} %</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"dev-cart\">\r\n\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t<view class=\"dev-name\">光照</view>\r\n\t\t\t\t\t<image class=\"dev-logo\" src=\"../../static/lsens.png\" mode=\"\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"dev-data\">{{ lsens }} lx</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"dev-cart\">\r\n\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t<view class=\"dev-name\">烟雾</view>\r\n\t\t\t\t\t<image class=\"dev-logo\" src=\"../../static/ppm.png\" mode=\"\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"dev-data\">{{ ppm }} ppm</view>\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\r\n\t\t<!-- 添加智能对话区域 -->\r\n\t\t<view class=\"chat-area\">AI智能助手\r\n\t\t\t<scroll-view scroll-y class=\"chat-messages\" :scroll-into-view=\"'msg-' + (messages.length - 1)\">\r\n\t\t\t\t<view v-for=\"(msg, index) in messages\" :key=\"index\" :id=\"'msg-' + index\"\r\n\t\t\t\t\t:class=\"['message', msg.type === 'user' ? 'user-message' : 'ai-message']\">\r\n\t\t\t\t\t{{ msg.content }}\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\r\n\t\t\t<view class=\"input-area\">\r\n\t\t\t\t<input type=\"text\" v-model=\"userInput\" placeholder=\"请输入您的问题或指令\" @confirm=\"sendMessage\" />\r\n\r\n\t\t\t\t<button class=\"voice-btn\" @touchstart=\"startRecord\" @touchend=\"stopRecord\">\r\n\t\t\t\t\t<image src=\"../../static/voice.png\" class=\"icon-voice\" mode=\"aspectFit\"></image>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t<button class=\"send-btn\" @tap=\"sendMessage\">\r\n\t\t\t\t\t<image src=\"../../static/enter.png\" class=\"icon-voice\" mode=\"aspectFit\"></image>\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport GlobalPopup from '@/components/GlobalPopup.vue'\r\n\tconst user = require('@/common.js')\r\n\timport {\r\n\t\tip\r\n\t} from '@/common.js'\r\n\tconst {\r\n\t\tcreateCommonToken\r\n\t} = require('@/key.js')\r\n\timport {\r\n\t\tparse,\r\n\t\tstringify\r\n\t} from 'querystring'\r\n\timport {\r\n\t\tonLedSwitch,\r\n\t\tonBeepSwitch,\r\n\t\tsetBrightness,\r\n\t\tsetBeepVolume,\r\n\t\tsetFanSpeed,\r\n\t\tsetColorMode\r\n\t} from '@/pages/control/control.vue'\r\n\timport {\r\n\t\tsetThreshold,\r\n\t\ttemp_th,\r\n\t\thumi_th,\r\n\t\tlsens_th\r\n\t} from '../configPage/configPage.vue'\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttoken: '',\r\n\t\t\t\ttemp: '0',\r\n\t\t\t\thumi: '0',\r\n\t\t\t\tlsens: '0',\r\n\t\t\t\tppm: '0',\r\n\r\n\t\t\t\tled: false,\r\n\t\t\t\tbeep: false,\r\n\t\t\t\tbright: '',\r\n\t\t\t\tweather_temp: 0,\r\n\t\t\t\tweather: {\r\n\t\t\t\t\ttemp: '4',\r\n\t\t\t\t\thumi: '40',\r\n\t\t\t\t\twindspeed: '34',\r\n\t\t\t\t\ttext: '多云'\r\n\t\t\t\t},\r\n\t\t\t\tair: {\r\n\t\t\t\t\tcategory: '优',\r\n\t\t\t\t\taqi: '24'\r\n\t\t\t\t},\r\n\t\t\t\twarning: '',\r\n\t\t\t\tsuggest: null,\r\n\t\t\t\ttemp_th: 100,\r\n\t\t\t\thumi_th: 100,\r\n\t\t\t\tlsens_th: 100,\r\n\t\t\t\tppm_th: 100,\r\n\t\t\t\ttext1: \"警告：温度超出阈值!!!\",\r\n\t\t\t\ttext2: \"警告：湿度超出阈值!!!\",\r\n\t\t\t\ttext3: \"警告：光照强度超出阈值!!!\",\r\n\t\t\t\ttext4: \"警告：烟雾报警!!!\",\r\n\t\t\t\tcondition1: false,\r\n\t\t\t\tcondition2: false,\r\n\t\t\t\tcondition3: false,\r\n\t\t\t\tcondition4: false,\r\n\t\t\t\tuserInput: '',\r\n\t\t\t\tchatResponse: '',\r\n\t\t\t\tmessages: [],\r\n\t\t\t\trecording: false,\r\n\t\t\t\trecorderManager: null,\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t// 根据条件动态生成通知文本\r\n\t\t\tcomputedText() {\r\n\t\t\t\tlet result = \"\";\r\n\t\t\t\tif (this.temp > this.temp_th) {\r\n\t\t\t\t\tresult += this.text1;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.humi > this.humi_th) {\r\n\t\t\t\t\tresult += this.text2;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.lsens > this.lsens_th) {\r\n\t\t\t\t\tresult += this.text3;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.ppm > this.ppm_th) {\r\n\t\t\t\t\tresult += this.text4;\r\n\t\t\t\t}\r\n\t\t\t\t// 默认内容（当没有条件满足时）\r\n\t\t\t\tif (this.temp <= this.temp_th && this.humi <= this.humi_th && this.lsens <= this.lsens_th && this.ppm <=\r\n\t\t\t\t\tthis.ppm_th) {\r\n\t\t\t\t\tresult = \"温度,湿度,光照,烟雾传感器检测正常\";\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tconst params = {\r\n\t\t\t\tauthor_key: 'rQ9SmPK1mdPtwhRto/+8RNqy57QHHxqjd0GjEzLSkkiE4m2tBg3M43LRK+kvs7sW',\r\n\t\t\t\tversion: '2022-05-01',\r\n\t\t\t\tuser_id: '412104',\r\n\t\t\t}\r\n\t\t\tconst token = createCommonToken(params);\r\n\t\t\tthis.token = token;\r\n\t\t\t// 存储token以供其他组件使用\r\n\t\t\tuni.setStorageSync('token', token);\r\n\t\t\tthis.fetchDevData();\r\n\t\t\tthis.getWeather();\r\n\t\t\tthis.showPopup();\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.fetchDevData();\r\n\t\t\t// this.showPopup();\r\n\t\t\tsetInterval(() => { //定时获取\r\n\t\t\t\tthis.fetchDevData();\r\n\t\t\t}, 6000);\r\n\t\t\tsetInterval(() => {\r\n\t\t\t\tthis.showPopup();\r\n\t\t\t}, 6000);\r\n\t\t},\r\n\t\tonNavigationBarButtonTap: function(e) {\r\n\t\t\tuni.reLaunch({\r\n\t\t\t\turl: '/pages/login/login'\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 切换条件\r\n\t\t\ttoggleCondition(condition) {\r\n\t\t\t\tthis[condition] = !this[condition];\r\n\t\t\t},\r\n\t\t\tfetchThreshold() {\r\n\t\t\t\tconsole.log(\"阈值check\");\r\n\t\t\t\tconsole.log(user.getAll())\r\n\t\t\t\tconsole.log(ip)\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\t//url: \"http://192.168.198.1:3000/get_thresholds\",\r\n\t\t\t\t\turl: `http://${ip}/get_thresholds`,\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tusername: user.getUser('username') // 替换为实际的用户名\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\t\tuser.setUser('temp_th', res.data.temp_th);\r\n\t\t\t\t\t\t\tuser.setUser('humi_th', res.data.humi_th);\r\n\t\t\t\t\t\t\tuser.setUser('lsens_th', res.data.lsens_th);\r\n\t\t\t\t\t\t\tuser.setUser('ppm_th', res.data.ppm_th);\r\n\t\t\t\t\t\t\tthis.temp_th = user.getUser('temp_th');\r\n\t\t\t\t\t\t\tthis.humi_th = user.getUser('humi_th');\r\n\t\t\t\t\t\t\tthis.lsens_th = user.getUser('lsens_th');\r\n\t\t\t\t\t\t\tthis.ppm_th = user.getUser('ppm_th');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.error('Failed to get thresholds:', res.data.error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.error('Request failed:', err);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tshowPopup() {\r\n\t\t\t\tthis.fetchThreshold();\r\n\r\n\t\t\t\tif (this.temp > this.temp_th) {\r\n\t\t\t\t\tconsole.log(\"弹窗temp:\" + this.temp + \"---------------\" + this.temp_th)\r\n\t\t\t\t\t//this.toggleCondition('condition1');\r\n\t\t\t\t\tthis.$refs.popup.showPopup();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.humi > this.humi_th) {\r\n\t\t\t\t\tconsole.log(\"弹窗humi:\" + this.humi + \"---------------\" + this.humi_th)\r\n\t\t\t\t\t//this.toggleCondition('condition2')\r\n\t\t\t\t\tthis.$refs.popup.showPopup2()\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif (this.lsens > this.lsens_th) {\r\n\t\t\t\t\tconsole.log(\"弹窗lsens:\" + this.lsens + \"---------------\" + this.lsens_th)\r\n\t\t\t\t\t//this.toggleCondition('condition3')\r\n\t\t\t\t\tthis.$refs.popup.showPopup3();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.ppm > this.ppm_th) {\r\n\t\t\t\t\tconsole.log(\"弹窗ppm:\" + this.ppm + \"---------------\" + this.ppm_th)\r\n\t\t\t\t\t//this.toggleCondition('condition4')\r\n\t\t\t\t\tthis.$refs.popup.showPopup4();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfetchDevData() {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'https://iot-api.heclouds.com/thingmodel/query-device-property', //仅为示例，并非真实接口地址。\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tproduct_id: '6j085UsKhq',\r\n\t\t\t\t\t\tdevice_name: 'd1'\r\n\t\t\t\t\t},\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'authorization': this.token //自定义请求头信息\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log('获取设备数据');\r\n\t\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\t\tthis.beep = res.data.data[0].value === 'true';\r\n\t\t\t\t\t\tthis.humi = res.data.data[3].value;\r\n\t\t\t\t\t\tthis.led = res.data.data[4].value === 'true'; //? true:false\r\n\t\t\t\t\t\tthis.temp = res.data.data[12].value;\r\n\t\t\t\t\t\tthis.lsens = res.data.data[6].value;\r\n\t\t\t\t\t\tthis.ppm = res.data.data[8].value;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetWeather() {\r\n\t\t\t\tconsole.log(\"天气API\");\r\n\r\n\t\t\t\tconst weatherRequest = new Promise((resolve, reject) => {\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: 'https://devapi.qweather.com/v7/weather/now?location=101121301&key=6ff97dc76f834ab2b0dd2e13b35c5775',\r\n\t\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tconsole.log(\"天气请求成功\")\r\n\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\tif (res.data.code === \"200\") {\r\n\t\t\t\t\t\t\t\tthis.weather.temp = res.data.now.temp;\r\n\t\t\t\t\t\t\t\t// this.weather.humi = res.data.now.humidity;\r\n\t\t\t\t\t\t\t\tthis.$set(this.weather, 'humi', res.data.now.humidity);\r\n\t\t\t\t\t\t\t\tthis.weather.windspeed = res.data.now.windSpeed;\r\n\t\t\t\t\t\t\t\tthis.weather.text = res.data.now.text;\r\n\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.error(\"Error fetching weather data: \", res.data);\r\n\t\t\t\t\t\t\t\treject(res.data);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (error) => {\r\n\t\t\t\t\t\t\tconsole.error(\"Error fetching weather data: \", error);\r\n\t\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst airRequest = new Promise((resolve, reject) => {\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: 'https://devapi.qweather.com/v7/air/now?location=101121301&key=6ff97dc76f834ab2b0dd2e13b35c5775',\r\n\t\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tif (res.data.code === \"200\") {\r\n\t\t\t\t\t\t\t\tthis.air.category = res.data.now.category;\r\n\t\t\t\t\t\t\t\tthis.air.aqi = res.data.now.aqi;\r\n\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.error(\"Error fetching air data: \", res.data);\r\n\t\t\t\t\t\t\t\treject(res.data);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (error) => {\r\n\t\t\t\t\t\t\tconsole.error(\"Error fetching air data: \", error);\r\n\t\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst warningRequest = new Promise((resolve, reject) => {\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: 'https://devapi.qweather.com/v7/warning/now?location=101121301&key=6ff97dc76f834ab2b0dd2e13b35c5775',\r\n\t\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tif (res.data.code === \"200\") {\r\n\t\t\t\t\t\t\t\tthis.warning = res.data.warning[0].title || '无'; // 存储天气数据\r\n\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.error(\"Error fetching warning data: \", res.data);\r\n\t\t\t\t\t\t\t\treject(res.data);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (error) => {\r\n\t\t\t\t\t\t\tconsole.error(\"Error fetching warning data: \", error);\r\n\t\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst suggestRequest = new Promise((resolve, reject) => {\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: 'https://devapi.qweather.com/v7/indices/1d?type=8&location=101121301&key=6ff97dc76f834ab2b0dd2e13b35c5775',\r\n\t\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tif (res.data.code === \"200\") {\r\n\t\t\t\t\t\t\t\tthis.suggest = res.data.daily[0].text; // 存储天气数据\r\n\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.error(\"Error fetching suggest data: \", res.data);\r\n\t\t\t\t\t\t\t\treject(res.data);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (error) => {\r\n\t\t\t\t\t\t\tconsole.error(\"Error fetching suggest data: \", error);\r\n\t\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tPromise.all([weatherRequest, airRequest, warningRequest, suggestRequest])\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tconsole.log(this.weather.temp);\r\n\t\t\t\t\t\tconsole.log(this.air.aqi);\r\n\t\t\t\t\t\tconsole.log(this.suggest);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\tconsole.error(\"One or more requests failed: \", error);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync sendMessage() {\r\n\t\t\t\tif (!this.userInput.trim()) return;\r\n\r\n\t\t\t\tthis.messages.push({\r\n\t\t\t\t\ttype: 'user',\r\n\t\t\t\t\tcontent: this.userInput\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(\"AI对话:\"+this.userInput)\r\n\r\n\t\t\t\tconst userQuery = this.userInput;\r\n\t\t\t\tthis.userInput = '';\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await uni.request({\r\n\t\t\t\t\t\turl: 'https://open.api.gu28.top/v1/chat/completions',\r\n\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tmodel: \"gpt-4o-mini\",\r\n\t\t\t\t\t\t\tmessages: [{\r\n\t\t\t\t\t\t\t\trole: \"system\",\r\n\t\t\t\t\t\t\t\tcontent: \"你是一个智能家居助手，负责查询传感器数据和当地天气情况、控制设备（包括led灯、蜂鸣报警器、温度阈值调整、湿度阈值调整、光强度阈值调整、烟雾浓度阈值调整、风扇挡位调整、彩灯模式调整。\"\r\n\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\trole: \"user\",\r\n\t\t\t\t\t\t\t\tcontent: userQuery\r\n\t\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t\tfunctions: [{\r\n\t\t\t\t\t\t\t\t\tname: \"controlLED\",\r\n\t\t\t\t\t\t\t\t\tdescription: \"控制LED灯的开关\",\r\n\t\t\t\t\t\t\t\t\tparameters: {\r\n\t\t\t\t\t\t\t\t\t\ttype: \"object\",\r\n\t\t\t\t\t\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t\t\t\t\t\tstatus: {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tdescription: \"true表示开灯，false表示关灯\"\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\trequired: [\"status\"]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tname: \"controlBeep\",\r\n\t\t\t\t\t\t\t\t\tdescription: \"控制报警器的开关\",\r\n\t\t\t\t\t\t\t\t\tparameters: {\r\n\t\t\t\t\t\t\t\t\t\ttype: \"object\",\r\n\t\t\t\t\t\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t\t\t\t\t\tstatus: {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tdescription: \"true表示开启报警器，false表示关闭报警器\"\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\trequired: [\"status\"]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tname: \"getSensorData\",\r\n\t\t\t\t\t\t\t\t\tdescription: \"获取传感器数据\",\r\n\t\t\t\t\t\t\t\t\tparameters: {\r\n\t\t\t\t\t\t\t\t\t\ttype: \"object\",\r\n\t\t\t\t\t\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t\t\t\t\t\tsensor: {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tenum: [\"temperature\", \"humidity\", \"light\", \"smoke\", \"all\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"weather\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\tdescription: \"要查询的传感器类型\"\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\trequired: [\"sensor\"]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tname: \"setThreshold\",\r\n\t\t\t\t\t\t\t\t\tdescription: \"设置各种传感器的阈值\",\r\n\t\t\t\t\t\t\t\t\tparameters: {\r\n\t\t\t\t\t\t\t\t\t\ttype: \"object\",\r\n\t\t\t\t\t\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t\t\t\t\t\ttype: {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tenum: [\"temp\", \"humi\", \"lsens\", \"ppm\"],\r\n\t\t\t\t\t\t\t\t\t\t\t\tdescription: \"阈值类型：temp(温度)、humi(湿度)、lsens(光照)、ppm(烟雾)\"\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"number\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tdescription: \"阈值数值，范围0-100\"\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\trequired: [\"type\", \"value\"]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tname: \"setBrightness\",\r\n\t\t\t\t\t\t\t\t\tdescription: \"设置LED灯亮度\",\r\n\t\t\t\t\t\t\t\t\tparameters: {\r\n\t\t\t\t\t\t\t\t\t\ttype: \"object\",\r\n\t\t\t\t\t\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t\t\t\t\t\tlevel: {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"integer\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tenum: [0, 1, 2, 3],\r\n\t\t\t\t\t\t\t\t\t\t\t\tdescription: \"亮度等级：0(暗)、1(较暗)、2(较亮)、3(亮)\"\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\trequired: [\"level\"]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tname: \"setBeepVolume\",\r\n\t\t\t\t\t\t\t\t\tdescription: \"设置报警器音量\",\r\n\t\t\t\t\t\t\t\t\tparameters: {\r\n\t\t\t\t\t\t\t\t\t\ttype: \"object\",\r\n\t\t\t\t\t\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t\t\t\t\t\tlevel: {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"integer\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tenum: [0, 1, 2, 3],\r\n\t\t\t\t\t\t\t\t\t\t\t\tdescription: \"音量等级：0(小)、1(较小)、2(中)、3(大)\"\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\trequired: [\"level\"]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tname: \"setFanSpeed\",\r\n\t\t\t\t\t\t\t\t\tdescription: \"设置风扇速度\",\r\n\t\t\t\t\t\t\t\t\tparameters: {\r\n\t\t\t\t\t\t\t\t\t\ttype: \"object\",\r\n\t\t\t\t\t\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t\t\t\t\t\tlevel: {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"integer\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tenum: [0, 1, 2, 3],\r\n\t\t\t\t\t\t\t\t\t\t\t\tdescription: \"速度等级：0(关)、1(慢)、2(中)、3(快)\"\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\trequired: [\"level\"]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tname: \"setColorMode\",\r\n\t\t\t\t\t\t\t\t\tdescription: \"设置彩灯/彩虹灯模式\",\r\n\t\t\t\t\t\t\t\t\tparameters: {\r\n\t\t\t\t\t\t\t\t\t\ttype: \"object\",\r\n\t\t\t\t\t\t\t\t\t\tproperties: {\r\n\t\t\t\t\t\t\t\t\t\t\tmode: {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"integer\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tenum: [0, 1, 2, 3],\r\n\t\t\t\t\t\t\t\t\t\t\t\tdescription: \"彩灯模式：0(关)、1(模式一)、2(模式二)、3(模式三)\"\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\trequired: [\"mode\"]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tfunction_call: \"auto\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t'Authorization': 'Bearer sk-CBbXYAj2A480YQerqALXWgaecu4cCyPSaMrLBATZHH1QJxYM',\r\n\t\t\t\t\t\t\t'Accept':'application/json',\r\n\t\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (response.statusCode === 200) {\r\n\t\t\t\t\t\tconst result = response.data.choices[0].message;\r\n\r\n\t\t\t\t\t\t// 显示AI的回复\r\n\t\t\t\t\t\tif (result.content) {\r\n\t\t\t\t\t\t\tthis.messages.push({\r\n\t\t\t\t\t\t\t\ttype: 'ai',\r\n\t\t\t\t\t\t\t\tcontent: result.content\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconsole.log(\"AI回复:\"+result.content)\r\n\r\n\t\t\t\t\t\t// 处理函数调用\r\n\t\t\t\t\t\tif (result.function_call) {\r\n\t\t\t\t\t\t\tconst functionName = result.function_call.name;\r\n\t\t\t\t\t\t\tconst args = JSON.parse(result.function_call.arguments);\r\n\r\n\t\t\t\t\t\t\tlet functionResult = '';\r\n\r\n\t\t\t\t\t\t\tswitch (functionName) {\r\n\t\t\t\t\t\t\t\tcase 'controlLED':\r\n\t\t\t\t\t\t\t\t\tonLedSwitch({\r\n\t\t\t\t\t\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: args.status\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tfunctionResult = `已${args.status ? '打开' : '关闭'}LED灯`;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase 'controlBeep':\r\n\t\t\t\t\t\t\t\t\tonBeepSwitch({\r\n\t\t\t\t\t\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: args.status\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tfunctionResult = `已${args.status ? '打开' : '关闭'}报警器`;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase 'getSensorData':\r\n\t\t\t\t\t\t\t\t\tswitch (args.sensor) {\r\n\t\t\t\t\t\t\t\t\t\tcase 'temperature':\r\n\t\t\t\t\t\t\t\t\t\t\tfunctionResult = `当前温度是 ${this.temp}℃`;\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\tcase 'humidity':\r\n\t\t\t\t\t\t\t\t\t\t\tfunctionResult = `当前湿度是 ${this.humi}%`;\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\tcase 'light':\r\n\t\t\t\t\t\t\t\t\t\t\tfunctionResult = `当前光照强度是 ${this.lsens}lx`;\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\tcase 'smoke':\r\n\t\t\t\t\t\t\t\t\t\t\tfunctionResult = `当前烟雾浓度是 ${this.ppm}ppm`;\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\tcase 'weather':\r\n\t\t\t\t\t\t\t\t\t\t\tfunctionResult =\r\n\t\t\t\t\t\t\t\t\t\t\t\t`威海现在天气${this.weather.text}，温度${this.weather.temp}℃，湿度${this.weather.humi}%，空气质量${this.air.category}`;\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\tcase 'all':\r\n\t\t\t\t\t\t\t\t\t\t\tfunctionResult =\r\n\t\t\t\t\t\t\t\t\t\t\t\t`当前数据如下：\\n温度：${this.temp}℃\\n湿度：${this.humi}%\\n光照：${this.lsens}lx\\n烟雾：${this.ppm}ppm\\nLED灯：${this.led ? '开启' : '关闭'}\\n报警器：${this.beep ? '开启' : '关闭'}`;\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase 'setThreshold':\r\n\t\t\t\t\t\t\t\t\tif (args.value >= 0 && args.value <= 100) {\r\n\t\t\t\t\t\t\t\t\t\tsetThreshold(args.type, args.value);\r\n\t\t\t\t\t\t\t\t\t\tconst thresholdTypes = {\r\n\t\t\t\t\t\t\t\t\t\t\ttemp: '温度',\r\n\t\t\t\t\t\t\t\t\t\t\thumi: '湿度',\r\n\t\t\t\t\t\t\t\t\t\t\tlsens: '光照',\r\n\t\t\t\t\t\t\t\t\t\t\tppm: '烟雾'\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\tfunctionResult = `已将${thresholdTypes[args.type]}阈值设置为${args.value}`;\r\n\r\n\t\t\t\t\t\t\t\t\t\t// 更新本地数据\r\n\t\t\t\t\t\t\t\t\t\tthis[`${args.type}_th`] = args.value;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase 'setBrightness':\r\n\t\t\t\t\t\t\t\t\tsetBrightness(args.level);\r\n\t\t\t\t\t\t\t\t\tconst brightnessLevels = ['暗', '较暗', '较亮', '亮'];\r\n\t\t\t\t\t\t\t\t\tfunctionResult = `已将LED亮度设置为${brightnessLevels[args.level]}`;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase 'setBeepVolume':\r\n\t\t\t\t\t\t\t\t\tsetBeepVolume(args.level);\r\n\t\t\t\t\t\t\t\t\tconst volumeLevels = ['小', '较小', '中', '大'];\r\n\t\t\t\t\t\t\t\t\tfunctionResult = `已将报警器音量设置为${volumeLevels[args.level]}`;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase 'setFanSpeed':\r\n\t\t\t\t\t\t\t\t\tsetFanSpeed(args.level);\r\n\t\t\t\t\t\t\t\t\tconst speedLevels = ['关闭', '慢速', '中速', '快速'];\r\n\t\t\t\t\t\t\t\t\tfunctionResult = `已将风扇速度设置为${speedLevels[args.level]}`;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase 'setColorMode':\r\n\t\t\t\t\t\t\t\t\tsetColorMode(args.mode);\r\n\t\t\t\t\t\t\t\t\tconst colorModes = ['关闭', '模式一', '模式二', '模式三'];\r\n\t\t\t\t\t\t\t\t\tfunctionResult = `已将彩灯设置为${colorModes[args.mode]}`;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (functionResult) {\r\n\t\t\t\t\t\t\t\tthis.messages.push({\r\n\t\t\t\t\t\t\t\t\ttype: 'ai',\r\n\t\t\t\t\t\t\t\t\tcontent: functionResult\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('Error:', error);\r\n\t\t\t\t\tthis.messages.push({\r\n\t\t\t\t\t\ttype: 'ai',\r\n\t\t\t\t\t\tcontent: '抱歉，我遇到了一些问题，请稍后再试。'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 修改语音识别相关方法\r\n\t\t\tstartRecord() {\r\n\t\t\t\t// 请求录音权限\r\n\t\t\t\t// uni.authorize({\r\n\t\t\t\t// \tscope: 'scope.record',\r\n\t\t\t\t// \tsuccess: () => {\r\n\r\n\t\t\t\t// \t},\r\n\t\t\t\t// \tfail: () => {\r\n\t\t\t\t// \t\tuni.showToast({\r\n\t\t\t\t// \t\t\ttitle: '请授权录音权限',\r\n\t\t\t\t// \t\t\ticon: 'none'\r\n\t\t\t\t// \t\t});\r\n\t\t\t\t// \t}\r\n\t\t\t\t// });\r\n\r\n\t\t\t\tthis.recording = true;\r\n\t\t\t\tthis.recorderManager = uni.getRecorderManager();\r\n\r\n\t\t\t\t// 配置录音参数\r\n\t\t\t\tconst options = {\r\n\t\t\t\t\tduration: 60000, // 最长录音时间，单位ms\r\n\t\t\t\t\tsampleRate: 16000, // 采样率\r\n\t\t\t\t\tnumberOfChannels: 1, // 录音通道数\r\n\t\t\t\t\tencodeBitRate: 96000, // 编码码率\r\n\t\t\t\t\tformat: 'mp3', // 音频格式\r\n\t\t\t\t\tframeSize: 50 // 指定帧大小\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.recorderManager.onStart(() => {\r\n\t\t\t\t\tconsole.log('录音开始');\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '开始录音',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.recorderManager.onStop((res) => {\r\n\t\t\t\t\tthis.recording = false;\r\n\t\t\t\t\tconsole.log('录音结束', res);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '录音结束',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 发送录音文件到语音识别API\r\n\t\t\t\t\tthis.speechToText(res.tempFilePath);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.recorderManager.start(options);\r\n\t\t\t},\r\n\r\n\t\t\tstopRecord() {\r\n\t\t\t\tif (this.recorderManager) {\r\n\t\t\t\t\tthis.recorderManager.stop();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tasync speechToText(audioFile) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 显示加载提示\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '正在识别...'\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tconst response = await uni.uploadFile({\r\n\t\t\t\t\t\turl: 'https://open.api.gu28.top/v1/audio/transcriptions',\r\n\t\t\t\t\t\tfilePath: audioFile,\r\n\t\t\t\t\t\tname: 'file',\r\n\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\tmodel: 'whisper-1',\r\n\t\t\t\t\t\t\tlanguage: 'zh'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t'Authorization': 'Bearer sk-CBbXYAj2A480YQerqALXWgaecu4cCyPSaMrLBATZHH1QJxYM',\r\n\t\t\t\t\t\t\t'Content-Type': 'multipart/form-data'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// 隐藏加载提示\r\n\t\t\t\t\tuni.hideLoading();\r\n\r\n\t\t\t\t\tif (response.statusCode === 200) {\r\n\t\t\t\t\t\tconst result = JSON.parse(response.data);\r\n\t\t\t\t\t\tif (result.text) {\r\n\t\t\t\t\t\t\tthis.userInput = result.text.trim();\r\n\t\t\t\t\t\t\tthis.sendMessage();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthrow new Error('No transcription result');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error('Speech recognition failed');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('Speech recognition error:', error);\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '语音识别失败，请重试',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.messages.push({\r\n\t\t\t\t\t\ttype: 'ai',\r\n\t\t\t\t\t\tcontent: '语音识别失败，请重试或使用文字输入。'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.wrap {\r\n\t\tpadding: 30rpx;\r\n\t\t/* 内边距设置 */\r\n\t}\r\n\r\n\t.dev-area {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\t/* 排列 */\r\n\t\tflex-wrap: wrap;\r\n\t\t/* 自动换行 */\r\n\t}\r\n\r\n\t.dev-cart {\r\n\t\theight: 150rpx;\r\n\t\twidth: 320rpx;\r\n\t\tborder-radius: 30rpx;\r\n\t\t/* 弧度 */\r\n\t\tmargin-top: 30px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\t/* 内部内容 */\r\n\t\talign-items: center;\r\n\t\tbox-shadow: 0 0 15rpx #ccc;\r\n\t\t/* 边框 */\r\n\t}\r\n\r\n\t.dev-cart-long {\r\n\t\theight: 150rpx;\r\n\t\twidth: 690rpx;\r\n\t\tborder-radius: 30rpx;\r\n\t\t/* 弧度 */\r\n\t\tmargin-top: 30px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\t/* 内部内容 */\r\n\t\talign-items: center;\r\n\t\tbox-shadow: 0 0 15rpx #ccc;\r\n\t\t/* 边框 */\r\n\t}\r\n\r\n\t.dev-name {\r\n\t\tfont-size: 20rpx;\r\n\t\tcolor: #6d6d6d;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.dev-logo {\r\n\t\theight: 70rpx;\r\n\t\twidth: 70rpx;\r\n\t\tmargin-top: 10rpx;\r\n\t}\r\n\r\n\t.dev-data {\r\n\t\tfont-size: 50rpx;\r\n\t\tcolor: #6d6d6d;\r\n\t}\r\n\r\n\r\n\t.weather-card {\r\n\t\tpadding: 30rpx;\r\n\t\t/* 增加内边距 */\r\n\t\tborder-radius: 15rpx;\r\n\t\t/* 调整圆角 */\r\n\t\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1);\r\n\t\t/* 更柔和的阴影 */\r\n\t\tmargin-top: 20rpx;\r\n\t\tbackground-color: #f0f8ff;\r\n\t\t/* 更柔和的背景色 */\r\n\t\ttext-align: center;\r\n\t\t/* 文字居中 */\r\n\t}\r\n\r\n\t.weather-info {\r\n\t\tmargin-top: 10rpx;\r\n\t\t/* 增加顶部间距 */\r\n\t}\r\n\r\n\t.weather-temp {\r\n\t\tfont-size: 50rpx;\r\n\t\t/* 增加字体大小 */\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333;\r\n\t\t/* 更深的颜色 */\r\n\t}\r\n\r\n\t.weather-text {\r\n\t\tfont-size: 24rpx;\r\n\t\t/* 增加字体大小 */\r\n\t\tcolor: #666;\r\n\t\t/* 更柔和的颜色 */\r\n\t}\r\n\r\n\t.weather-humidity,\r\n\t.weather-wind {\r\n\t\tfont-size: 18rpx;\r\n\t\t/* 增加字体大小 */\r\n\t\tcolor: #888;\r\n\t\t/* 更柔和的颜色 */\r\n\t\tmargin: 5rpx 0;\r\n\t\t/* 增加上下间距 */\r\n\t}\r\n\r\n\t.weather-warning {\r\n\t\tfont-size: 16rpx;\r\n\t\t/* 增加字体大小 */\r\n\t\tcolor: #d9534f;\r\n\t\t/* 警告信息颜色 */\r\n\t\tmargin-top: 10rpx;\r\n\t\t/* 增加顶部间距 */\r\n\t}\r\n\r\n\t.chat-area {\r\n\t\tmargin-top: 30rpx;\r\n\t\tborder-radius: 15rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1);\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\r\n\t.chat-messages {\r\n\t\theight: 400rpx;\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\r\n\t.message {\r\n\t\tmargin: 20rpx 0;\r\n\t\tpadding: 20rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\tmax-width: 80%;\r\n\t}\r\n\r\n\t.user-message {\r\n\t\tbackground-color: #13227a;\r\n\t\tcolor: #fff;\r\n\t\tmargin-left: 70rpx;\r\n\t}\r\n\r\n\t.ai-message {\r\n\t\tbackground-color: #f0f0f0;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.input-area {\r\n\t\tdisplay: flex;\r\n\t\tpadding: 20rpx;\r\n\t\tborder-top: 5rpx solid #eee;\r\n\t}\r\n\r\n\t.input-area input {\r\n\t\tflex: 1;\r\n\t\theight: 80rpx;\r\n\t\tborder: 1rpx solid #ddd;\r\n\t\tborder-radius: 35rpx;\r\n\t\tpadding: 0 30rpx;\r\n\t\tmargin-right: 20rpx;\r\n\t}\r\n\r\n\t.voice-btn,\r\n\t.send-btn {\r\n\t\twidth: 70rpx;\r\n\t\theight: 70rpx;\r\n\t\tborder-radius: 35rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbackground-color: #13227a;\r\n\t\tcolor: #fff;\r\n\t\tmargin: 10rpx;\r\n\t}\r\n</style>","import { render, staticRenderFns, recyclableRender, components } from \"./GlobalPopup.vue?vue&type=template&id=50fb603e&\"\nvar renderjs\nimport script from \"./GlobalPopup.vue?vue&type=script&lang=js&\"\nexport * from \"./GlobalPopup.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GlobalPopup.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/GlobalPopup.vue\"\nexport default component.exports","export * from \"-!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./GlobalPopup.vue?vue&type=template&id=50fb603e&\"","var components\ntry {\n  components = {\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./GlobalPopup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./GlobalPopup.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view> <u-popup :show=\"show\" mode=\"center\" @close=\"close\" @open=\"open\">\r\n\t\t\t<view class=\"popup-content\">\r\n\t\t\t\t<text class=\"popup-text\">警告：温度超出阈值!!!</text>\r\n\t\t\t\t<button @click=\"close\">点击关闭</button>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\t\t<u-popup :show=\"show2\" mode=\"center\" @close=\"close2\" @open=\"open2\">\r\n\t\t\t<view class=\"popup-content\">\r\n\t\t\t\t<text class=\"popup-text\">警告：湿度超出阈值!!!</text>\r\n\t\t\t\t<button @click=\"close2\">点击关闭</button>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\r\n\t\t<u-popup :show=\"show3\" mode=\"center\" @close=\"close3\" @open=\"open3\">\r\n\t\t\t<view class=\"popup-content\">\r\n\t\t\t\t<text class=\"popup-text\">警告：光照强度超出阈值!!!</text>\r\n\t\t\t\t<button @click=\"close3\">点击关闭</button>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\r\n\t\t<u-popup :show=\"show4\" mode=\"center\" @close=\"close4\" @open=\"open4\">\r\n\t\t\t<view class=\"popup-content\">\r\n\t\t\t\t<text class=\"popup-text\">警告：烟雾报警!!!</text>\r\n\t\t\t\t<button @click=\"close4\">点击关闭</button>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\t</view>\r\n\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: 'GlobalPopup',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshow: false,\r\n\t\t\t\tshow2: false,\r\n\t\t\t\tshow3: false,\r\n\t\t\t\tshow4: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\topen() {\r\n\t\t\t\t// console.log('open');\r\n\t\t\t},\r\n\t\t\tclose() {\r\n\t\t\t\tthis.show = false\r\n\t\t\t\t// console.log('close');\r\n\t\t\t},\r\n\t\t\tshowPopup() {\r\n\t\t\t\tthis.show = true\r\n\t\t\t},\r\n\r\n\t\t\topen2() {\r\n\t\t\t\t// console.log('open');\r\n\t\t\t},\r\n\t\t\tclose2() {\r\n\t\t\t\tthis.show2 = false\r\n\t\t\t\t// console.log('close');\r\n\t\t\t},\r\n\t\t\tshowPopup2() {\r\n\t\t\t\tthis.show2 = true\r\n\t\t\t},\r\n\r\n\t\t\topen3() {\r\n\t\t\t\t// console.log('open');\r\n\t\t\t},\r\n\t\t\tclose3() {\r\n\t\t\t\tthis.show3 = false\r\n\t\t\t\t// console.log('close');\r\n\t\t\t},\r\n\t\t\tshowPopup3() {\r\n\t\t\t\tthis.show3 = true\r\n\t\t\t},\r\n\r\n\t\t\topen4() {\r\n\t\t\t\t// console.log('open');\r\n\t\t\t},\r\n\t\t\tclose4() {\r\n\t\t\t\tthis.show4 = false\r\n\t\t\t\t// console.log('close');\r\n\t\t\t},\r\n\t\t\tshowPopup4() {\r\n\t\t\t\tthis.show4 = true\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.popup-content {\r\n\t\tpadding: 40rpx;\r\n\t\tbackground-color: #fff;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\tbutton {\r\n\t\tmargin-top: 20rpx;\r\n\t\tpadding: 5rpx 15rpx;\r\n\t\tbackground-color: blue;\r\n\t\tcolor: #fff;\r\n\t\tborder: none;\r\n\t\tborder-radius: 5rpx;\r\n\t}\r\n\r\n\t.popup-text {\r\n\t\tcolor: #ff4d4f;\r\n\t\t/* 设置字体颜色为红色 */\r\n\t\tfont-size: 32rpx;\r\n\t\t/* 设置字体大小 */\r\n\t\tfont-weight: bold;\r\n\t\t/* 加粗字体 */\r\n\t\tmargin-bottom: 20rpx;\r\n\t\t/* 与按钮之间的间距 */\r\n\t}\r\n</style>","import mod from \"-!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./GlobalPopup.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./GlobalPopup.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1734741602435\n      var cssReload = require(\"D:/0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import { render, staticRenderFns, recyclableRender, components } from \"./control.vue?vue&type=template&id=0ec1947c&\"\nvar renderjs\nimport script from \"./control.vue?vue&type=script&lang=js&\"\nexport * from \"./control.vue?vue&type=script&lang=js&\"\nimport style0 from \"./control.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/control/control.vue\"\nexport default component.exports","export * from \"-!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./control.vue?vue&type=template&id=0ec1947c&\"","var components\ntry {\n  components = {\n    uSubsection: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-subsection/u-subsection\" */ \"@/uni_modules/uview-ui/components/u-subsection/u-subsection.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./control.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./control.vue?vue&type=script&lang=js&\"","<template>\r\n\r\n\t<view class=\"wrap\">\r\n\t\t<view class=\"dev-area\">\r\n\r\n\t\t\t<view class=\"dev-cart\">\r\n\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t<view class=\"dev-name\">台灯</view>\r\n\t\t\t\t\t<image class=\"dev-logo\" src=\"../../static/led.png\" mode=\"\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<switch :checked=\"led\" @change=\"onLedSwitch\" color=\"#13227a\" />\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"dev-cart\">\r\n\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t<view class=\"dev-name\">报警器</view>\r\n\t\t\t\t\t<image class=\"dev-logo\" src=\"../../static/beep.png\" mode=\"\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<switch :checked=\"beep\" @change=\"onBeepSwitch\" color=\"#13227a\" />\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\t\t<view class=\"subsection\">\r\n\t\t\t<view class=\"dev-name2\">LED亮度</view><u-subsection activeColor=\"#13227a\" :list=\"list1\" :current=\"curNow1\"\r\n\t\t\t\t@change=\"handleClick\"></u-subsection>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"subsection\">\r\n\t\t\t<view class=\"dev-name2\">报警器音量</view><u-subsection activeColor=\"#13227a\" :list=\"list2\" :current=\"curNow2\"\r\n\t\t\t\t@change=\"handleBeepClick\"></u-subsection>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"subsection\">\r\n\t\t\t<view class=\"dev-name2\">风扇</view><u-subsection activeColor=\"#13227a\" :list=\"list3\" :current=\"curNow3\"\r\n\t\t\t\t@change=\"handleSpeedClick\"></u-subsection>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"subsection\">\r\n\t\t\t<view class=\"dev-name2\">彩灯</view><u-subsection activeColor=\"#13227a\" :list=\"list4\" :current=\"curNow4\"\r\n\t\t\t\t@change=\"handleModeClick\"></u-subsection>\r\n\t\t</view>\r\n\r\n\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tgetCurrentInstance\r\n\t} from 'vue' // 导入getCurrentInstance\r\n\tconst {\r\n\t\tcreateCommonToken\r\n\t} = require('@/key.js')\r\n\tconst params = {\r\n\t\tauthor_key: 'rQ9SmPK1mdPtwhRto/+8RNqy57QHHxqjd0GjEzLSkkiE4m2tBg3M43LRK+kvs7sW',\r\n\t\tversion: '2022-05-01',\r\n\t\tuser_id: '412104',\r\n\t}\r\n\tconst token = createCommonToken(params);\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tled: false,\r\n\t\t\t\tbeep: false,\r\n\t\t\t\tlist1: ['暗', '较暗', '较亮', '亮'],\r\n\t\t\t\tlist2: ['小', '较小', '中', '大'],\r\n\t\t\t\tlist3: ['关', '慢', '中', '快'],\r\n\t\t\t\tlist4: ['关', '模式一', '模式二', '模式三'],\r\n\t\t\t\tcurNow1: 0,\r\n\t\t\t\tcurNow2: 0,\r\n\t\t\t\tcurNow3: 0,\r\n\t\t\t\tcurNow4: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\r\n\t\t\tthis.fetchData();\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tsetInterval(() => {\r\n\t\t\t\tthis.fetchData();\r\n\t\t\t}, 4000);\r\n\t\t\tsetInterval(() => {\r\n\r\n\t\t\t\tthis.updateState();\r\n\r\n\t\t\t}, 15000);\r\n\r\n\t\t},\r\n\t\tonNavigationBarButtonTap: function(e) {\r\n\t\t\tuni.reLaunch({\r\n\t\t\t\turl: '/pages/login/login'\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonLedSwitch(event) {\r\n\t\t\t\tlet value = event.detail.value;\r\n\t\t\t\t// 发送请求更新设备属性\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'https://iot-api.heclouds.com/thingmodel/set-device-property', // 仅为示例，并非真实接口地址。\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tproduct_id: '6j085UsKhq',\r\n\t\t\t\t\t\tdevice_name: 'd1',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\"led\": value\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'authorization': token // 自定义请求头信息\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\tconsole.log('LED ' + (value ? 'ON' : 'OFF') + ' !');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tonBeepSwitch(event) {\r\n\t\t\t\tlet value = event.detail.value;\r\n\t\t\t\t// 发送请求更新设备属性\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'https://iot-api.heclouds.com/thingmodel/set-device-property', // 仅为示例，并非真实接口地址。\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tproduct_id: '6j085UsKhq',\r\n\t\t\t\t\t\tdevice_name: 'd1',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\"beep\": value\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'authorization': token // 自定义请求头信息\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\tconsole.log('BEEP ' + (value ? 'ON' : 'OFF') + ' !');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsectionChange(index) {\r\n\t\t\t\tthis.curNow = index;\r\n\t\t\t},\r\n\t\t\tupdateState() {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'https://iot-api.heclouds.com/thingmodel/set-device-property', //仅为示例，并非真实接口地址。\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tproduct_id: '6j085UsKhq',\r\n\t\t\t\t\t\tdevice_name: 'd1',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t// \"led\": this.led,\r\n\t\t\t\t\t\t\t// \"beep\": this.beep,\r\n\t\t\t\t\t\t\t\"bright\": this.curNow1,\r\n\t\t\t\t\t\t\t\"sound\": this.curNow2,\r\n\t\t\t\t\t\t\t\"speed\": this.curNow3,\r\n\t\t\t\t\t\t\t\"gramode\": this.curNow4,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'authorization': token //自定义请求头信息\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\tconsole.log(\"当前状态发送成功\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\tconsole.log('当前状态发送失败')\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfetchData() {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'https://iot-api.heclouds.com/thingmodel/query-device-property', //仅为示例，并非真实接口地址。\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tproduct_id: '6j085UsKhq',\r\n\t\t\t\t\t\tdevice_name: 'd1'\r\n\t\t\t\t\t},\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'authorization': token //自定义请求头信息\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log('获取设备数据');\r\n\t\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\t\tthis.beep = res.data.data[0].value === 'true';\r\n\t\t\t\t\t\tthis.led = res.data.data[5].value === 'true'; //? true:false\r\n\t\t\t\t\t\tconsole.log('led:' + this.led);\r\n\t\t\t\t\t\tconsole.log('beep:' + this.beep);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\thandleClick(index) {\r\n\t\t\t\tthis.curNow1 = index;\r\n\t\t\t\tthis.updateState();\r\n\r\n\t\t\t},\r\n\t\t\thandleBeepClick(index) {\r\n\t\t\t\tthis.curNow2 = index;\r\n\t\t\t\tthis.updateState();\r\n\r\n\t\t\t},\r\n\t\t\thandleSpeedClick(index) {\r\n\t\t\t\tthis.curNow3 = index;\r\n\t\t\t\tthis.updateState();\r\n\r\n\t\t\t},\r\n\t\t\thandleModeClick(index) {\r\n\t\t\t\tthis.curNow4 = index;\r\n\t\t\t\tthis.updateState();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t// 导出控制函数\r\n\texport const onLedSwitch = function(event) {\r\n\t\tconsole.log(\"AI调试:灯\")\r\n\r\n\t\tlet value = event.detail.value;\r\n\r\n\t\t// 发送请求更新设备属性\r\n\t\tuni.request({\r\n\t\t\turl: 'https://iot-api.heclouds.com/thingmodel/set-device-property', // 仅为示例，并非真实接口地址。\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tproduct_id: '6j085UsKhq',\r\n\t\t\t\tdevice_name: 'd1',\r\n\t\t\t\tparams: {\r\n\t\t\t\t\t\"led\": value\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\theader: {\r\n\t\t\t\t'authorization': token // 自定义请求头信息\r\n\t\t\t},\r\n\t\t\tsuccess: () => {\r\n\t\t\t\tconsole.log('LED ' + (value ? 'ON' : 'OFF') + ' !');\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t}\r\n\r\n\texport const onBeepSwitch = function(event) {\r\n\t\tconsole.log(\"AI调试:beep\")\r\n\r\n\t\tlet value = event.detail.value;\r\n\t\t// 发送请求更新设备属性\r\n\t\tuni.request({\r\n\t\t\turl: 'https://iot-api.heclouds.com/thingmodel/set-device-property',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tproduct_id: '6j085UsKhq',\r\n\t\t\t\tdevice_name: 'd1',\r\n\t\t\t\tparams: {\r\n\t\t\t\t\t\"beep\": value\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\theader: {\r\n\t\t\t\t'authorization': token\r\n\t\t\t},\r\n\t\t\tsuccess: () => {\r\n\t\t\t\tconsole.log('BEEP ' + (value ? 'ON' : 'OFF') + ' !');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\texport const setBrightness = function(level) {\r\n\t\tconsole.log(\"AI调试:LED亮度\", level);\r\n\r\n\t\tuni.request({\r\n\t\t\turl: 'https://iot-api.heclouds.com/thingmodel/set-device-property',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tproduct_id: '6j085UsKhq',\r\n\t\t\t\tdevice_name: 'd1',\r\n\t\t\t\tparams: {\r\n\t\t\t\t\t\"bright\": level\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\theader: {\r\n\t\t\t\t'authorization': token\r\n\t\t\t},\r\n\t\t\tsuccess: () => {\r\n\t\t\t\tconsole.log('LED brightness set to level:', level);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\texport const setBeepVolume = function(level) {\r\n\t\tconsole.log(\"AI调试:报警器音量\", level);\r\n\r\n\t\tuni.request({\r\n\t\t\turl: 'https://iot-api.heclouds.com/thingmodel/set-device-property',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tproduct_id: '6j085UsKhq',\r\n\t\t\t\tdevice_name: 'd1',\r\n\t\t\t\tparams: {\r\n\t\t\t\t\t\"sound\": level\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\theader: {\r\n\t\t\t\t'authorization': token\r\n\t\t\t},\r\n\t\t\tsuccess: () => {\r\n\t\t\t\tconsole.log('Beep volume set to level:', level);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\texport const setFanSpeed = function(level) {\r\n\t\tconsole.log(\"AI调试:风扇速度\", level);\r\n\r\n\t\tuni.request({\r\n\t\t\turl: 'https://iot-api.heclouds.com/thingmodel/set-device-property',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tproduct_id: '6j085UsKhq',\r\n\t\t\t\tdevice_name: 'd1',\r\n\t\t\t\tparams: {\r\n\t\t\t\t\t\"speed\": level\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\theader: {\r\n\t\t\t\t'authorization': token\r\n\t\t\t},\r\n\t\t\tsuccess: () => {\r\n\t\t\t\tconsole.log('Fan speed set to level:', level);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\texport const setColorMode = function(mode) {\r\n\t\tconsole.log(\"AI调试:彩灯模式\", mode);\r\n\r\n\t\tuni.request({\r\n\t\t\turl: 'https://iot-api.heclouds.com/thingmodel/set-device-property',\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tproduct_id: '6j085UsKhq',\r\n\t\t\t\tdevice_name: 'd1',\r\n\t\t\t\tparams: {\r\n\t\t\t\t\t\"gramode\": mode\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\theader: {\r\n\t\t\t\t'authorization': token\r\n\t\t\t},\r\n\t\t\tsuccess: () => {\r\n\t\t\t\tconsole.log('Color light mode set to:', mode);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.wrap {\r\n\t\tpadding: 30rpx;\r\n\t}\r\n\r\n\t.dev-area {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n\r\n\t.dev-cart {\r\n\t\theight: 150rpx;\r\n\t\twidth: 320rpx;\r\n\t\tborder-radius: 30rpx;\r\n\t\tmargin-top: 30px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\talign-items: center;\r\n\t\tbox-shadow: 0 0 15rpx #ccc;\r\n\t}\r\n\r\n\t.dev-cart-long {\r\n\t\theight: 150rpx;\r\n\t\twidth: 690rpx;\r\n\t\tborder-radius: 30rpx;\r\n\t\tmargin-top: 30px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\talign-items: center;\r\n\t\tbox-shadow: 0 0 15rpx #ccc;\r\n\t}\r\n\r\n\t.button {\r\n\t\twidth: 150rpx;\r\n\t\theight: 60rpx;\r\n\t\tline-height: 60rpx;\r\n\t\ttext-align: center;\r\n\t\tbackground-color: #13227a;\r\n\t\tcolor: #fff;\r\n\t\tborder-radius: 10rpx;\r\n\t\tfont-size: 16px;\r\n\t\tborder: none;\r\n\t\tcursor: pointer;\r\n\t\tbox-shadow: 0 0 15rpx #ccc;\r\n\t\tmargin: 0 10rpx;\r\n\t}\r\n\r\n\t.dev-name {\r\n\t\tfont-size: 20rpx;\r\n\t\tcolor: #6d6d6d;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.dev-name2 {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #000;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.dev-logo {\r\n\t\theight: 70rpx;\r\n\t\twidth: 70rpx;\r\n\t\tmargin-top: 10rpx;\r\n\t}\r\n\r\n\t.control-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.button-group {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t}\r\n\r\n\t.button-group .u-button {\r\n\t\tmargin: 0 10rpx;\r\n\t\tmin-width: 120rpx;\r\n\t}\r\n\r\n\t.subsection {\r\n\t\theight: 100rpx;\r\n\t\twidth: 690rpx;\r\n\t\tmargin-top: 30px;\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n</style>","import mod from \"-!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./control.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./control.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1734741602440\n      var cssReload = require(\"D:/0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import { render, staticRenderFns, recyclableRender, components } from \"./configPage.vue?vue&type=template&id=39e822b4&\"\nvar renderjs\nimport script from \"./configPage.vue?vue&type=script&lang=js&\"\nexport * from \"./configPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./configPage.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/configPage/configPage.vue\"\nexport default component.exports","export * from \"-!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./configPage.vue?vue&type=template&id=39e822b4&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./configPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./configPage.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"wrap\">\r\n\t\t<view class=\"dev-area\">\r\n\t\t\t<!-- 温度阈值长卡片 -->\r\n\t\t\t<view class=\"device-cart-l\">\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<view class=\"dev-name\">温度阈值</view>\r\n\t\t\t\t\t<!-- 当前温度阈值显示 -->\r\n\t\t\t\t\t<view class=\"dev-name\">{{ temp_th }}℃</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"ctrl-slider\">\r\n\t\t\t\t\t<!-- 滑动条调用slider组件，实时更新阈值 -->\r\n\t\t\t\t\t<slider activeColor=\"#13227a\" :value=\"temp_th\" @change=\"sliderChange($event, 'slider1')\" min=\"0\"\r\n\t\t\t\t\t\tmax=\"100\" step=\"1\" block-size=\"20\" show-value />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 湿度阈值长卡片 -->\r\n\t\t\t<view class=\"device-cart-l\">\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<view class=\"dev-name\">湿度阈值</view>\r\n\t\t\t\t\t<!-- 当前湿度阈值显示 -->\r\n\t\t\t\t\t<view class=\"dev-name\">{{ humi_th }}%</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"ctrl-slider\">\r\n\t\t\t\t\t<!-- 滑动条调用slider组件，实时更新阈值 -->\r\n\t\t\t\t\t<slider activeColor=\"#13227a\" :value=\"humi_th\" @change=\"sliderChange($event, 'slider2')\" min=\"0\"\r\n\t\t\t\t\t\tmax=\"100\" step=\"1\" block-size=\"20\" show-value />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"device-cart-l\">\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<view class=\"dev-name\">光照阈值</view>\r\n\t\t\t\t\t<!-- 当前光照阈值显示 -->\r\n\t\t\t\t\t<view class=\"dev-name\">{{ lsens_th }}lx</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"ctrl-slider\">\r\n\t\t\t\t\t<!-- 滑动条调用slider组件，实时更新阈值 -->\r\n\t\t\t\t\t<slider activeColor=\"#13227a\" :value=\"lsens_th\" @change=\"sliderChange($event, 'slider3')\" min=\"0\"\r\n\t\t\t\t\t\tmax=\"100\" step=\"1\" block-size=\"20\" show-value />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"device-cart-l\">\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<view class=\"dev-name\">可燃性气体阈值</view>\r\n\t\t\t\t\t<!-- 当前可燃性气体阈值显示 -->\r\n\t\t\t\t\t<view class=\"dev-name\">{{ ppm_th }}ppm</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"ctrl-slider\">\r\n\t\t\t\t\t<!-- 滑动条调用slider组件，实时更新阈值 -->\r\n\t\t\t\t\t<slider activeColor=\"#13227a\" :value=\"ppm_th\" @change=\"sliderChange($event, 'slider4')\" min=\"0\"\r\n\t\t\t\t\t\tmax=\"100\" step=\"1\" block-size=\"20\" show-value />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tip\r\n\t} from '@/common.js'\r\n\timport {\r\n\t\tstringify\r\n\t} from 'querystring'\r\n\timport {\r\n\t\tgetCurrentInstance\r\n\t} from 'vue'\r\n\r\n\tconst {\r\n\t\tcreateCommonToken\r\n\t} = require('@/key.js')\r\n\tconst user = require('@/common.js')\r\n\tconst params = {\r\n\t\tauthor_key: 'rQ9SmPK1mdPtwhRto/+8RNqy57QHHxqjd0GjEzLSkkiE4m2tBg3M43LRK+kvs7sW',\r\n\t\tversion: '2022-05-01',\r\n\t\tuser_id: '412104',\r\n\t}\r\n\tconst token = createCommonToken(params);\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttemp_th: 100,\r\n\t\t\t\thumi_th: 100,\r\n\t\t\t\tlsens_th: 100,\r\n\t\t\t\tppm_th: 100,\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tsetInterval(() => { //定时发送\r\n\t\t\t\tthis.getThresholdsFromSqlAndPost();\r\n\t\t\t}, 10000)\r\n\t\t},\r\n\t\tonLoad() {\r\n\r\n\t\t\tthis.getThresholdsFromSqlAndPost() ;\r\n\t\t},\r\n\t\tonNavigationBarButtonTap: function(e) {\r\n\t\t\tuni.reLaunch({\r\n\t\t\t\turl: '/pages/login/login'\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetThresholdsFromSqlAndPost() {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\t//url: \"http://localhost:3000/get_thresholds\",\r\n\t\t\t\t\turl: `http://${ip}/get_thresholds`,\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tusername: user.getUser('username') // 替换为实际的用户名\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\t\t// 假设后端返回的是阈值对象\r\n\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\tuser.setUser('temp_th', res.data.temp_th);\r\n\t\t\t\t\t\t\tuser.setUser('humi_th', res.data.humi_th);\r\n\t\t\t\t\t\t\tuser.setUser('lsens_th', res.data.lsens_th);\r\n\t\t\t\t\t\t\tuser.setUser('ppm_th', res.data.ppm_th);\r\n\t\t\t\t\t\t\tthis.temp_th = user.getUser('temp_th');\r\n\t\t\t\t\t\t\tthis.humi_th = user.getUser('humi_th');\r\n\t\t\t\t\t\t\tthis.lsens_th = user.getUser('lsens_th');\r\n\t\t\t\t\t\t\tthis.ppm_th = user.getUser('ppm_th');\r\n\t\t\t\t\t\t\tuser.getAll();\r\n\r\n\t\t\t\t\t\t\tthis.postThresholds(\"false\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.error('Failed to get thresholds:', res.data.error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.error('Request failed:', err);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\tupdateThresholdsFromSqlAndPost(flag) {\r\n\t\t\t\t// 修改数据库\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: `http://${ip}/update_thresholds`,\r\n\t\t\t\t\tmethod: 'PUT',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tusername: user.getUser('username'),\r\n\t\t\t\t\t\ttemp_th: this.temp_th,\r\n\t\t\t\t\t\thumi_th: this.humi_th,\r\n\t\t\t\t\t\tlsens_th: this.lsens_th,\r\n\t\t\t\t\t\tppm_th: this.ppm_th\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\t\tconsole.log('数据库阈值修改成功:', res.data);\r\n\t\t\t\t\t\t\t// 发送到设备端\r\n\t\t\t\t\t\t\tthis.postThresholds(flag);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.error('Failed to update thresholds:', res.data.error);\r\n\t\t\t\t\t\t\t// 如果更新失败，回滚到之前的值\r\n\t\t\t\t\t\t\tthis.rollbackThresholds();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.error('Request failed:', err);\r\n\t\t\t\t\t\t// 如果请求失败，回滚到之前的值\r\n\t\t\t\t\t\tthis.rollbackThresholds();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpostThresholds(flag) {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'https://iot-api.heclouds.com/thingmodel/set-device-property',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tproduct_id: '6j085UsKhq',\r\n\t\t\t\t\t\tdevice_name: 'd1',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\"temp_th\": this.temp_th,\r\n\t\t\t\t\t\t\t\"humi_th\": this.humi_th,\r\n\t\t\t\t\t\t\t\"lsens_th\": this.lsens_th,\r\n\t\t\t\t\t\t\t\"ppm_th\": this.ppm_th\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'authorization': token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (data) => {\r\n\t\t\t\t\t\tconsole.log('设备端阈值调整成功:', data);\r\n\t\t\t\t\t\tif (flag==\"true\"){\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '阈值更新成功',\r\n\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\tconsole.log('设备端阈值调整失败');\r\n\t\t\t\t\t\t//this.rollbackThresholds();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 滑动条变化事件的方法\r\n\t\t\tsliderChange(e, id) {\r\n\t\t\t\tconsole.log('滑块ID:', id)\r\n\t\t\t\tconsole.log('新的阈值:', e.detail.value)\r\n\r\n\t\t\t\t// 更新本地数据\r\n\t\t\t\tswitch (id) {\r\n\t\t\t\t\tcase 'slider1':\r\n\t\t\t\t\t\tthis.temp_th = e.detail.value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'slider2':\r\n\t\t\t\t\t\tthis.humi_th = e.detail.value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'slider3':\r\n\t\t\t\t\t\tthis.lsens_th = e.detail.value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'slider4':\r\n\t\t\t\t\t\tthis.ppm_th = e.detail.value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tthis.updateThresholdsFromSqlAndPost(\"true\"); //修改数据库+设备端\r\n\t\t\t},\r\n\t\t\t// 添加回滚方法\r\n\t\t\trollbackThresholds() {\r\n\t\t\t\tthis.temp_th = user.getUser('temp_th');\r\n\t\t\t\tthis.humi_th = user.getUser('humi_th');\r\n\t\t\t\tthis.lsens_th = user.getUser('lsens_th');\r\n\t\t\t\tthis.ppm_th = user.getUser('ppm_th');\r\n\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '阈值更新失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 阈值控制函数  --这里只要控制发到数据库就行了(刷新更新页面)\r\n\texport const setThreshold = function(type, value) {\r\n\t\tconsole.log(\"AI调试:阈值\")\r\n\t\tconsole.log(type)\r\n\t\tconsole.log(value)\r\n\r\n\t\t// 构建参数对象\r\n\t\tlet temp_th = 100\r\n\t\tlet humi_th = 100\r\n\t\tlet lsens_th = 100\r\n\t\tlet ppm_th = 100\r\n\r\n\t\t//从数据库中获取真实值\r\n\t\tuni.request({\r\n\t\t\t//url: \"http://localhost:3000/get_thresholds\",\r\n\t\t\turl: `http://${ip}/get_thresholds`,\r\n\t\t\tmethod: 'GET',\r\n\t\t\tdata: {\r\n\t\t\t\tusername: user.getUser('username') // 替换为实际的用户名\r\n\t\t\t},\r\n\t\t\tsuccess: res => {\r\n\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t// 假设后端返回的是阈值对象\r\n\t\t\t\t\tconsole.log(\"AI进入数据库\")\r\n\t\t\t\t\tuser.setUser('temp_th', res.data.temp_th);\r\n\t\t\t\t\tuser.setUser('humi_th', res.data.humi_th);\r\n\t\t\t\t\tuser.setUser('lsens_th', res.data.lsens_th);\r\n\t\t\t\t\tuser.setUser('ppm_th', res.data.ppm_th);\r\n\t\t\t\t\ttemp_th = user.getUser('temp_th');\r\n\t\t\t\t\thumi_th = user.getUser('humi_th');\r\n\t\t\t\t\tlsens_th = user.getUser('lsens_th');\r\n\t\t\t\t\tppm_th = user.getUser('ppm_th');\r\n\r\n\t\t\t\t\t//填入修改的值\r\n\t\t\t\t\tswitch (`${type}`) {\r\n\t\t\t\t\t\tcase \"temp\":\r\n\t\t\t\t\t\t\ttemp_th = value\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase \"humi\":\r\n\t\t\t\t\t\t\thumi_th = value\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase \"lsens\":\r\n\t\t\t\t\t\t\tlsens_th = value\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase \"ppm\":\r\n\t\t\t\t\t\t\tppm_th = value\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tconsole.log(\"未匹配到任何 case\");\r\n\t\t\t\t\t\t\t// 默认情况下的操作\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 修改数据库\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: `http://${ip}/update_thresholds`,\r\n\t\t\t\t\t\tmethod: 'PUT',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tusername: user.getUser('username'),\r\n\t\t\t\t\t\t\ttemp_th: temp_th,\r\n\t\t\t\t\t\t\thumi_th: humi_th,\r\n\t\t\t\t\t\t\tlsens_th: lsens_th,\r\n\t\t\t\t\t\t\tppm_th: ppm_th\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tconsole.log(\"AI:修改阈值数据库\")\r\n\t\t\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\t\t\tconsole.log('数据库阈值修改成功:', res.data);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// // 发送到设备端\r\n\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\turl: 'https://iot-api.heclouds.com/thingmodel/set-device-property',\r\n\t\t\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\tproduct_id: '6j085UsKhq',\r\n\t\t\t\t\t\t\t\t\t\tdevice_name: 'd1',\r\n\t\t\t\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\t\t\t\t\"temp_th\": temp_th,\r\n\t\t\t\t\t\t\t\t\t\t\t\"humi_th\": humi_th,\r\n\t\t\t\t\t\t\t\t\t\t\t\"lsens_th\": lsens_th,\r\n\t\t\t\t\t\t\t\t\t\t\t\"ppm_th\": ppm_th\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t\t\t'authorization': token\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsuccess: (data) => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('AI设备端阈值调整成功:', data);\r\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'AI阈值更新成功',\r\n\t\t\t\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('设备端阈值调整失败');\r\n\t\t\t\t\t\t\t\t\t\t//this.rollbackThresholds();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.error('Failed to update thresholds:', res.data\r\n\t\t\t\t\t\t\t\t\t.error);\r\n\t\t\t\t\t\t\t\t// 如果更新失败，回滚到之前的值\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\tconsole.error('Request failed:', err);\r\n\t\t\t\t\t\t\t// 如果请求失败，回滚到之前的值\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.error('Failed to get thresholds:', res.data.error);\r\n\t\t\t\t} //200\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\tconsole.error('Request failed:', err);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\r\n\r\n\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.wrap {\r\n\t\tpadding: 30rpx; //内边距设置\r\n\t}\r\n\r\n\t.dev-area {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between; //排列\r\n\t\tflex-wrap: wrap; //自动换行\r\n\t}\r\n\r\n\t.dev-cart {\r\n\t\theight: 150rpx;\r\n\t\twidth: 320rpx;\r\n\t\tborder-radius: 30rpx; //弧度\r\n\t\tmargin-top: 30px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around; //内部内容\r\n\t\talign-items: center;\r\n\t\tbox-shadow: 0 0 15rpx #ccc; //边框\r\n\t}\r\n\r\n\t.dev-name {\r\n\t\tfont-size: 20rpx;\r\n\t\tcolor: #6d6d6d;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.dev-logo {\r\n\t\theight: 70rpx;\r\n\t\twidth: 70rpx;\r\n\t\tmargin-top: 10rpx;\r\n\t}\r\n\r\n\t.dev-data {\r\n\t\tfont-size: 50rpx;\r\n\t\tcolor: #6d6d6d;\r\n\t}\r\n\r\n\t/* 长设备卡片样式 */\r\n\t.device-cart-l {\r\n\t\theight: 150rpx;\r\n\t\t/* 设置高度为150像素 */\r\n\t\twidth: 700rpx;\r\n\t\t/* 设置宽度为700像素 */\r\n\t\tborder-radius: 30rpx;\r\n\t\t/* 设置边框圆角为30像素 */\r\n\t\tmargin-top: 30rpx;\r\n\t\t/* 设置上外边距为30像素 */\r\n\t\tdisplay: flex;\r\n\t\t/* 使用弹性盒子布局 */\r\n\t\tjustify-content: space-around;\r\n\t\t/* 在弹性容器中均匀分布子元素，两端对齐 */\r\n\t\talign-items: center;\r\n\t\t/* 在弹性容器中垂直居中对齐子元素 */\r\n\t\tbox-shadow: 0 0 15rpx #ccc;\r\n\t\t/* 设置盒子阴影，颜色为灰色 */\r\n\t}\r\n\r\n\r\n\t/* 滑动条样式 */\r\n\t.ctrl-slider {\r\n\t\twidth: 580rpx;\r\n\t\t/* 设置宽度为580像素 */\r\n\t}\r\n</style>","import mod from \"-!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./configPage.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./configPage.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1734741602445\n      var cssReload = require(\"D:/0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1734741602443\n      var cssReload = require(\"D:/0MySoftware/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}